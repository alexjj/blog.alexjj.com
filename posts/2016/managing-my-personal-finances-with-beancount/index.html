<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Managing my personal finances with beancount &#183; alexjj.com</title>
<meta name=title content="Managing my personal finances with beancount &#183; alexjj.com"><meta name=description content="Explaining my setup with beancount, fava, and pythonanywhere"><link rel=canonical href=https://alexjj.com/posts/2016/managing-my-personal-finances-with-beancount/><link type=text/css rel=stylesheet href=/css/main.bundle.min.25d341a2871e5f761d78620fbdb676a4a1fb2a7fa53b33fb570092cb62a472c0.css integrity="sha256-JdNBooceX3YdeGIPvbZ2pKH7Kn+lOzP7VwCSy2KkcsA="><script type=text/javascript src=/js/appearance.min.022d0ebc3b46a335eb1c7ef79b7f2de143d7cd5156d433638592ef1ce5f8554e.js integrity="sha256-Ai0OvDtGozXrHH73m38t4UPXzVFW1DNjhZLvHOX4VU4="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.dca97b105e29042a622e8d710f884abaf2a94524e16bceb26a0ef4dfcccd0e3f.js integrity="sha256-3Kl7EF4pBCpiLo1xD4hKuvKpRSTha86yag7038zNDj8=" data-copy=Copy data-copied=Copied></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Managing my personal finances with beancount"><meta property="og:description" content="Explaining my setup with beancount, fava, and pythonanywhere"><meta property="og:type" content="article"><meta property="og:url" content="https://alexjj.com/posts/2016/managing-my-personal-finances-with-beancount/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-02-27T00:00:00+00:00"><meta property="article:modified_time" content="2016-02-27T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Managing my personal finances with beancount"><meta name=twitter:description content="Explaining my setup with beancount, fava, and pythonanywhere"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Managing my personal finances with beancount","headline":"Managing my personal finances with beancount","abstract":"Explaining my setup with beancount, fava, and pythonanywhere","inLanguage":"en","url":"https:\/\/alexjj.com\/posts\/2016\/managing-my-personal-finances-with-beancount\/","author":{"@type":"Person","name":"Alex Johnstone"},"copyrightYear":"2016","dateCreated":"2016-02-27T00:00:00\u002b00:00","datePublished":"2016-02-27T00:00:00\u002b00:00","dateModified":"2016-02-27T00:00:00\u002b00:00","keywords":["Python","Finance"],"mainEntityOfPage":"true","wordCount":"4524"}]</script><meta name=author content="Alex Johnstone"><link href=mailto:alex@alexjj.com rel=me><link href=https://www.flickr.com/photos/alexjj/ rel=me><link href=https://github.com/alexjj rel=me><link href=https://linkedin.com/in/ajjohnstone rel=me><link href=https://fosstodon.org/@alexjj rel=me><link href=https://steamcommunity.com/id/captainlag/ rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold pe-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="z-40 flex flex-row items-center"><a href=/ class=mr-2><img src=/img/cat-logo.png width=50 height=58 class="max-h-[10rem] max-w-[10rem] object-scale-down object-left" alt=alexjj.com loading=lazy>
</a><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>alexjj.com</a></div><label id=menu-button for=menu-controller class="block sm:hidden"><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="invisible fixed inset-0 z-30 m-auto h-full w-full cursor-default overflow-auto bg-neutral-100/50 opacity-0 backdrop-blur-sm transition-opacity dark:bg-neutral-900/50"><ul class="mx-auto flex w-full max-w-7xl list-none flex-col overflow-visible px-6 py-6 ltr:text-right rtl:text-left sm:px-14 sm:py-10 sm:pt-10 md:px-24 lg:px-32"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class="group mb-1"><a href=/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="group mb-1"><a href=/notes/ title=Notes><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Notes</span></a></li><li class="group mb-1"><a href=/about/ title="About me"><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1"><a href=https://wiki.alexjj.com title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Wiki🌐</span></a></li><li class="group mb-1"><a href=https://gm5alx.uk title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">GM5ALX📻</span></a></li><li class="group mb-1"><button id=search-button-m0 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span></button></li></ul></div></label><ul class="hidden list-none flex-row ltr:text-right rtl:text-left sm:flex"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/notes/ title=Notes><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Notes</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/about/ title="About me"><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://wiki.alexjj.com title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Wiki🌐</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://gm5alx.uk title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">GM5ALX📻</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><button id=search-button-m1 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span></button></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>Welcome to my site</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/2016/managing-my-personal-finances-with-beancount/>Managing my personal finances with beancount</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Managing my personal finances with beancount</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center">&lt;time datetime="2016-02-27 00:00:00 &amp;#43;0000 UTC">27 February 2016&lt;/time>&lt;span class="px-2 text-primary-500">&amp;middot;&lt;/span>&lt;span>4524 words&lt;/span>&lt;span class="px-2 text-primary-500">&amp;middot;&lt;/span>&lt;span title="Reading time">22 mins&lt;/span>&lt;span class="px-2 text-primary-500">&amp;middot;&lt;/span>
&lt;span class="mb-[2px]">
&lt;a
href="https://github.com/alexjj/alexjj.com/tree/main/content/posts/2016/Managing-my-personal-finances-with-beancount/index.md"
class="text-lg hover:text-primary-500"
rel="noopener noreferrer"
target="_blank"
title="Edit content"
>&lt;span class="relative inline-block align-text-bottom px-1 icon">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">&lt;path fill="currentColor" d="M490.3 40.4C512.2 62.27 512.2 97.73 490.3 119.6L460.3 149.7L362.3 51.72L392.4 21.66C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7L339.7 74.34L437.7 172.3L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2L159.6 382.8C150.1 385.6 141.5 383.4 135 376.1C128.6 370.5 126.4 361 129.2 352.4L158.8 263.6C161.6 255.3 166.2 247.8 172.4 241.7V241.7zM192 63.1C209.7 63.1 224 78.33 224 95.1C224 113.7 209.7 127.1 192 127.1H96C78.33 127.1 64 142.3 64 159.1V416C64 433.7 78.33 448 96 448H352C369.7 448 384 433.7 384 416V319.1C384 302.3 398.3 287.1 416 287.1C433.7 287.1 448 302.3 448 319.1V416C448 469 405 512 352 512H96C42.98 512 0 469 0 416V159.1C0 106.1 42.98 63.1 96 63.1H192z"/>&lt;/svg>
&lt;/span>&lt;/a
>
&lt;/span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="min-w-0 min-h-0 max-w-prose grow"><p><em>My version of getting started with beancount.</em></p><h2 id=introduction class="relative group">Introduction <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#introduction aria-label=Anchor>#</a></span></h2><p>The aim of this post is to walk you through my setup of how I manage my personal finances. I&rsquo;ve read similar posts like these and found them useful to get ideas about what to do myself. Hopefully in turn, by presenting my setup it&rsquo;ll give you some ideas too.</p><p>At the core of system is <a href=http://furius.ca/beancount/ target=_blank rel="noreferrer noopener">beancount</a>. I&rsquo;ll explain it a little more shortly, but essentially it is a tool that reads a plain text file of my financial activity and undertakes double-entry accounting in order to easily assess my finances in any way imaginable. My whole system actually involves several other tools and services in order to make it work how I want.</p><p>Using a tool like beancount means I am free to set everything up the way I want that works for me, and not the way someone thinks I want it. It also means my data is free from constraints.</p><h2 id=what-i-wanted class="relative group">What I wanted <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#what-i-wanted aria-label=Anchor>#</a></span></h2><ul><li>Data stored in plain text</li><li>Add information quickly, and from anywhere</li><li>A tool that could do everything - transactions, multiple currencies, stocks, investing, taxes, etc.</li><li>A tool that could answer any question I had about my finances</li><li>Fancy graphs on a website I could safely access anywhere</li></ul><p>This is what I have.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/posts/2016/managing-my-personal-finances-with-beancount/spacemacs.png alt="Plain Text" loading=lazy></figure><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_330x0_resize_box_3.png 330w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_660x0_resize_box_3.png 660w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_1024x0_resize_box_3.png 1024w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_1320x0_resize_box_3.png 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_660x0_resize_box_3.png alt="Fava web ui" loading=lazy></figure></p><h2 id=the-background class="relative group">The Background <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-background aria-label=Anchor>#</a></span></h2><blockquote><p>tl;dr ledger-cli like financial tools are the best.</p></blockquote><p>Finding your system takes time and there can be many decisions to make. It took me a long time to realise the benefit of tracking my expenses and what my money was doing. When I did first start I used <a href=https://www.youneedabudget.com/ target=_blank rel="noreferrer noopener">YNAB</a>, You Need A Budget. I didn&rsquo;t really need a budget. I wasn&rsquo;t living pay cheque to pay cheque and had some savings, but I had no idea how much I should or could save a year or how much was I actually spending. What really was the cost of that holiday? My friend had started using YNAB, and I picked it up in a Steam sale for $15. It&rsquo;s pretty decent, easy to use, import transactions, tracking, graphs. I liked it. The first problem I found was that it wasn&rsquo;t setup for more than one currency. If you wanted more you had to make two separate budgets, and this meant that my expense categories ended up being a bit weird and after about 9 months of use I found I hadn&rsquo;t set them up well. This ultimately meant I could get the information I wanted out of the tool. I could go back and adjust all the expenses into different accounts but I didn&rsquo;t want to spend that time, and even then I&rsquo;d still have to export everything into a spreadsheet to do further calculations. I&rsquo;d also read some rumours that the next version was going to be a web only tool.</p><p>Now YNAB keeps it&rsquo;s data in some particular way and whilst there&rsquo;s an export all function from the tool, I was worried about longevity of it. This was reinforced when they released the new version that is web only and announced they&rsquo;d stop support for the desktop application after one year. Probably it&rsquo;ll work for many years forward, but one day something will be changed and it&rsquo;ll cease to work. Also the new version was going to have a monthly subscription&mldr;</p><p>So I started my search for <a href=https://wiki.archlinux.org/index.php/List_of_applications/Other#Finance target=_blank rel="noreferrer noopener">alternatives</a>. Another feature I wanted was for it to be open source and natively run on linux, YNAB did via wine, but certainly wasn&rsquo;t open source and that always bugged me. I try to encourage others to support and use open source and here I was doing the opposite. I had kept a duplicate ledger using GNUCash when I started with YNAB to see if I liked either of them, and I installed KMyMoney and even tried LibreOffice database program but they all had annoyances with multiple currencies and other things. Having something that could manage multiple currencies turned out to be my main decision criteria, and that&rsquo;s when I finally sat down and read the <a href=http://ledger-cli.org/ target=_blank rel="noreferrer noopener">ledger</a> manual.</p><p>For about 3 months I started using YNAB and ledger side by side and I came to realise that ledger was the perfect tool for me. It effortlessly handles multiple currencies, I can query my data any which way I like and all my data is stored as plain text I can version control and easily read for the rest of my life. Actually, I started with beancount first for a week or two but then switched to ledger. After four months I ended up going back to beancount.</p><h3 id=beancount class="relative group">Beancount <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#beancount aria-label=Anchor>#</a></span></h3><p>If you&rsquo;ve got here and don&rsquo;t know what double-entry accounting or beancount or ledger are, I&rsquo;m going to link you to this <a href=http://plaintextaccounting.org/ target=_blank rel="noreferrer noopener">great site</a> which explains it all.</p><p>I&rsquo;m also going to save why I chose beancount over ledger for another post. The basics are:</p><ul><li>Beancount (like HLedger) reads the file then orders the transactions before processing; Ledger processes them in the order they appear. This means with beancount I can lay out my files anyway I want.</li><li>Strict rules on writing transaction. This is the bit I touch, I&rsquo;m bound to do it wrong.</li><li>Being able to close accounts when they&rsquo;re done, so they don&rsquo;t appear anymore in reports etc.</li><li>Cleaner (in my opinion) way of balance assertions</li><li>I found the query syntax easier to understand</li><li>and some other misc things.</li></ul><p>The thing that made me switch? Seeing <a href=https://github.com/beancount/fava target=_blank rel="noreferrer noopener">fava</a>. This is an awesome project and the author has made several other contributions to the beancount world, one of which is the organised <a href=https://aumayr.github.io/beancount-docs-static/ target=_blank rel="noreferrer noopener">docs</a>.</p><p>Beancount is by no means perfect, but it fits well in my system.</p><h2 id=the-system class="relative group">The System <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-system aria-label=Anchor>#</a></span></h2><p>Now to talk about the parts that make up my finances system. These are all the tools/apps that I use which I&rsquo;ll explain.</p><p>Components:</p><ul><li><a href=http://furius.ca/beancount/ target=_blank rel="noreferrer noopener">beancount</a>: The accounting tool written and maintained by Martin Blais.</li><li><a href=https://github.com/beancount/fava target=_blank rel="noreferrer noopener">fava</a> A web interface to my data. Here&rsquo;s a <a href=https://fava.pythonanywhere.com target=_blank rel="noreferrer noopener">demo</a>.</li><li><a href=http://spacemacs.org/ target=_blank rel="noreferrer noopener">spacemacs</a>: Emacs and Vim ready to go.</li><li><a href=https://stackedit.io/ target=_blank rel="noreferrer noopener">stackedit</a>: In-browser editor. Many alternatives out there.</li><li><a href=https://keep.google.com target=_blank rel="noreferrer noopener">Google Keep</a>: Google&rsquo;s note taking tool - good for quick notes on my phone on the go.</li><li><a href=https://github.com/alexjj/money-scripts/blob/master/ukindexprices.py target=_blank rel="noreferrer noopener">Python price importer script</a>: Of my own creation</li><li><a href=https://www.dropbox.com/ target=_blank rel="noreferrer noopener">Dropbox</a>: Cross platform file syncing tool</li><li><a href=https://www.pythonanywhere.com target=_blank rel="noreferrer noopener">pythonanywhere</a>: Host, run, and code Python in the cloud.</li><li><a href=https://gitlab.com/users/sign_in target=_blank rel="noreferrer noopener">Gitlab</a>: Git as a service, and unlimited free private repos.</li></ul><p>The whole system is based around writing transactions that beancount can process and then analysing the data through fava.</p><p>The other tools aid me in doing this at home and away, although away generally means at work.</p><h2 id=entering-data class="relative group">Entering Data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#entering-data aria-label=Anchor>#</a></span></h2><h3 id=at-home class="relative group">At home <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#at-home aria-label=Anchor>#</a></span></h3><p>Plain text means any text editor will do. However, some people have written helpers, namely for <a href="https://bitbucket.org/blais/beancount/src/8b8bc8efbf51b6fcca0bfbb38a40fddcfd939a9e/src/elisp/beancount.el?at=default&amp;fileviewer=file-view-default" target=_blank rel="noreferrer noopener">emacs</a>, <a href=https://github.com/nathangrigg/vim-beancount target=_blank rel="noreferrer noopener">vim</a>, and <a href=https://packagecontrol.io/packages/Beancount target=_blank rel="noreferrer noopener">sublime</a>. These generally auto complete account names and maybe a few other features like aligning the numbers and running <code>bean-check</code> to look for errors. The emacs beancount minor mode, written by Martin, has the most features - although not as many as ledger-mode, and if you already use emacs then it&rsquo;s a no brainer. I&rsquo;d tried emacs and vim in the past as I was curious as to what they were all about but as I&rsquo;m not a developer and spend more time in Excel than anything else I didn&rsquo;t have the time to learn them to get the most out of it.</p><p>When I was using ledger I spent time in setting up emacs but it was all a bit messy and I felt like I was spending a lot of time just trying to setup emacs and not really doing what I wanted to be doing (plotting more account graphs of course!), that&rsquo;s when I found <a href=http://spacemacs.org/ target=_blank rel="noreferrer noopener">spacemacs</a>. This is a great project and bakes a whole load of great emacs plugins into a single and managed distribution. I probably only use a tiny percentage of the features but for editing and adding transactions is very slick. Check it out if you haven&rsquo;t. Sublime text would probably be my next best option for editing my beancount file. It&rsquo;s a lot easier to get started with and has some autocompletion, but not that great.</p><p>Another reason why I stuck with emacs was to use <a href=http://orgmode.org/ target=_blank rel="noreferrer noopener">org mode</a> to structure my file. With Ledger I quickly found having one file with everything didn&rsquo;t work too well. Especially when using xacts comand from emacs to add a transaction, so I split it into individual account files and added includes to my master ledger file. This was okay, but meant I had to move between a lot of files and as ledger doesn&rsquo;t rearrange transactions some reports and queries gave weird outputs. I worked around this by telling ledger to print everything to a ledger.all file then running queries and reports on that, but that was a pain. Probably there&rsquo;s a better way to do it but I never found it.</p><p>Anyway&mldr;I now have one file that&rsquo;s broken into headers with org and I just open or close them to see transactions. e.g.</p><ul><li>Options</li><li>Accounts</li><li>Assets</li></ul><ul><li>Bank 1</li><li>Bank2</li></ul><ul><li>Liabilities<ul><li>Credit Card 1</li><li>Mortgage</li><li>Loan 2</li></ul></li></ul><p><figure><img class="mx-auto my-0 rounded-md" src=/posts/2016/managing-my-personal-finances-with-beancount/spacemacs.png alt="Plain Text" loading=lazy></figure></p><p>I&rsquo;m still learning all the keyboard commands but I can quickly add new transactions and make changes. I don&rsquo;t use any importer tools (tools to take csv/ofx file from bank and convert into beancount input) as I tend to update once a week and there aren&rsquo;t many transactions to add each time. Plus I like to look at each one and think about what we bought and if it was really worth it. This <a href=https://github.com/jbms/beancount-import target=_blank rel="noreferrer noopener">one</a> looks promising, and Martin is working on a feature as part of beancount to do this.</p><p>These are the beancount minor-mode keys:</p><p>Key | Action | Description
&mdash;&mdash;- | &mdash;- &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- | &mdash;&mdash;&mdash;&ndash;
C-c &rsquo; | Insert Account | Bring up selection to choose an account
C-c C-g | Set transaction flag | Change ! to *
C-c r | Refresh account list | Read the file to update accounts for using <code>C-c '</code>
C-c l | Runs bean-check | Opens a new window with the results
C-c q | Query | Runs bean-query
C-c x | Context | Shows other transaction related, bean-doctor context
C-c k | Linked | Shows related transactions. Seems to be the same as context.
C-c ; | Align to previous number | Aligns the costs to the transaction above
C-c : | Align numbers | Should align all the numbers but doesn&rsquo;t work for me. Could be spacemacs issue though.</p><p>Spacemacs has good completion from helm (I think!) so I don&rsquo;t use insert account. Mostly use the transaction flag, running bean-check and aligning to previous numbers.</p><p>Once I&rsquo;ve updated my transactions I commit the changes and push to my private repo on gitlab.</p><h3 id=and-away class="relative group">And Away <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#and-away aria-label=Anchor>#</a></span></h3><p>Sometimes I want to add some transactions when I&rsquo;ve got some spare time at work, to save doing it at home in the evening, or if I&rsquo;m away. All this really means is I need some way of editing my files from another computer. Depending on that other computer it can be really easy or really hard. My work is somewhere in between, I can generally access most websites but I can&rsquo;t install anything and SSH is blocked. Other computers I&rsquo;d use might be at someone&rsquo;s house or in a public place and generally all I can guarantee is web access.</p><p>Again, even just web access there are a multitude of options and I keep looking out for better ones. However, as it currently stands I use dropbox and stackedit. Dropbox also acts as a nice way to sync the file between my computers at home, and it offers version control from the website for every time the file is saved - which I&rsquo;ve used! Dropbox doesn&rsquo;t have a built-in editor, or it certainly doesn&rsquo;t work for .beancount files, so I need something else to edit it. That&rsquo;s where I use stackedit. It can open files from Dropbox and Google Drive and save things to various places too. It&rsquo;s meant as an authoring site for websites as it&rsquo;s primarily a markdown editor. There are a bunch of these sites so whichever you like. Writebox for Chrome is also a nice app. There&rsquo;s no autocompletion or fancy features but generally I&rsquo;m copying and pasting old transactions and updating the date and amount 90% of the time. It&rsquo;s not as efficient but if I&rsquo;m making use of deadtime it&rsquo;s efficient to me.</p><p>For quick notes from my phone, such as significant cash transactions or ones with store cards I rarely use (and often forget to check), I use google keep. I can add a note very quickly and it saves the time and date automatically and I just add the key info. I then look at this later and transcribe into beancount at home and archive the note. I use Google Keep for other random notes but any note app you use would work. The key was finding something with a good mobile interface for quick input.</p><p><em>2016-03-03 Update: I now use Gitlab to host my beancount files so I only update on the gitlab website if I&rsquo;m not at home. Although I&rsquo;ve found it better just to use Google Keep and update properly at home (I always forget to pull changes when at home!).</em></p><h2 id=beancount-setup class="relative group">Beancount Setup <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#beancount-setup aria-label=Anchor>#</a></span></h2><p>One of the hardest parts to getting to use beancount was navigating the <a href=http://furius.ca/beancount/doc/index target=_blank rel="noreferrer noopener">docs</a> to figure out how to use it. Not that the docs are bad in content, far from it. Martin writes huge quantities of high quality documents. These are hosted on google docs and makes it super easy for others to comment, make corrections and ask questions. No other project have I been able to so easily make updates or clarify points as easily. The only downside is you can&rsquo;t search across all of the files to find some particular item. Generally I have to open up two or three docs that I think the answer might be in. When I first started using it I literally opened every doc in a separate tab and read through them all and constantly reference between them. <a href=https://github.com/aumayr target=_blank rel="noreferrer noopener">Dominik Aumayr</a> has made a nice sphinx generated site that pulls these links together although with the docstrings from the code in his <a href=https://aumayr.github.io/beancount-docs-static/ target=_blank rel="noreferrer noopener">site</a>. You&rsquo;ll still need to read a lot of them but it&rsquo;s a good starting place, and I think him and Martin are working to pull the content of Google Docs into it.</p><p><em>So read all the docs!</em></p><p>These are good to get going:</p><ul><li><a href=https://docs.google.com/document/d/1P5At-z1sP8rgwYLHso5sEy3u4rMnIUDDgob9Y_BYuWE/ target=_blank rel="noreferrer noopener">Getting started</a></li><li><a href=https://docs.google.com/document/d/1G-gsmwK551lSyuHboVLW3xbLhh99JfoKIbNnZSJxteE/ target=_blank rel="noreferrer noopener">Tutorial</a></li><li><a href=https://aumayr.github.io/beancount-docs-static/cookbook/index.html target=_blank rel="noreferrer noopener">Cookbooks</a></li></ul><p>I&rsquo;m only going to show you the basics to get started, and point out some (probably not all) the differences to ledger.</p><p>Compared to ledger, beancount requires more &ldquo;settings&rdquo; in the file. You have to open all your accounts, declare commodities and generally be more descriptive. I like this as it reduces the chances of errors in either what I type in or what beancount thinks I want to happen.</p><h3 id=your-filebeancount class="relative group">Your file.beancount <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#your-filebeancount aria-label=Anchor>#</a></span></h3><p>So a basic file will start like:</p><pre tabindex=0><code class=language-org-mode data-lang=org-mode>;; -*- mode: org; mode: beancount; -*-
;; My legder file

* Options ; Beancount options

option &#34;title&#34; &#34;My Finances&#34;
option &#34;operating_currency&#34; &#34;USD&#34; ; The main currencies you use
option &#34;operating_currency&#34; &#34;ABC&#34;
option &#34;operating_currency&#34; &#34;GBP&#34;

** Accounts ; Open all the accounts you have

2016-02-28 open Assets:BC:Bank:Checking    ABC ; You can specify commodities
2016-02-28 open Assets:US:Bank:Savings
2016-02-28 open Liabilities:UK:Bank:Loan
2016-02-28 open Liabilities:US:Bank:Credit
2016-02-28 open Equity:Opening-Balances

; When you start you have existing balances
; one way to manage this is to have an opening balance transaction.
; Alternatively you can use balance and pad.

** Opening Balances
2016-02-28 * &#34;Opening Balances&#34;
    Assets:BC:Bank:Checking          1000.00 ABC
    Assets:US:Bank:Savings            500.00 USD
    Liabilities:UK:Bank:Loan        -1000.00 GBP
    Liabilities:US:Bank:Credit      -1890.00 USD
    Equity:Opening-Balances

* Commodities ; Declaring cash and stocks and imaginary commodities you use

* Banking ; Keep transactions under here for banks
 - US
   + Bank 1 ; Org more sub headings for each country/bank

* Liabilities ; e.g. credit card transactions
; again sub divided by country/accounts

* Investments ; accounts related to investing

* Another other accounts or ways to divide up your system

* Prices
; Price data, or maybe an include to a price file
</code></pre><p>It&rsquo;s probably worthwhile looking at some of the example beancount files Martin has in his <a href="https://bitbucket.org/blais/beancount/src/8b8bc8efbf51/examples/?at=default" target=_blank rel="noreferrer noopener">repo</a>. Either example.beancount or files under the folders.</p><p>A basic transaction looks like this:</p><pre tabindex=0><code>YYYY-MM-DD * &#34;Payee&#34; &#34;Optional Description&#34; #optional-tag
    Account:Category:Sub-Category  1234.00 XYZ
    Account:Category:Sub-Category  -123.34 XYZ ;Optional Comment
    Account:Category:Sub-Category
</code></pre><p>Some differences from ledger:</p><ul><li>Account can only be:<ul><li>Assets</li><li>Liabilities</li><li>Equity</li><li>Income</li><li>Expenses</li></ul></li><li>The <code>*</code> has to be present, or it can be a <code>!</code>. Generally <code>!</code> means uncleared and <code>*</code> cleared.</li><li>The payee and description must be in &ldquo;quotes&rdquo;.</li><li>Tags are #</li><li>Prices are in this format:</li></ul><pre tabindex=0><code>2016-02-25 price GBP                  1.40 USD
</code></pre><p>You have unlimited sub-categories, but a good design is:
<code>Account:Country:Institution:Account-type</code></p><p>e.g.
<code>Assets:US:Chase:Checking</code></p><p>For expenses I got a lot of good inspiration from the <a href=https://www.mint.com/mint-categories target=_blank rel="noreferrer noopener">Mint list</a>. However, I&rsquo;d suggest you start small and grow as you use it.</p><h2 id=analysing-data-in-your-browser class="relative group">Analysing data in your browser <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#analysing-data-in-your-browser aria-label=Anchor>#</a></span></h2><p>This is my favourite part! You can do everything from the command line but I really enjoy the <a href=https://github.com/aumayr/fava target=_blank rel="noreferrer noopener">fava</a> tool to explore my data:</p><p><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-01_hue5e42bd554a60e3cd344376a15dd8cbd_236712_330x0_resize_box_3.png 330w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-01_hue5e42bd554a60e3cd344376a15dd8cbd_236712_660x0_resize_box_3.png 660w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-01_hue5e42bd554a60e3cd344376a15dd8cbd_236712_1024x0_resize_box_3.png 1024w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-01_hue5e42bd554a60e3cd344376a15dd8cbd_236712_1320x0_resize_box_3.png 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-01_hue5e42bd554a60e3cd344376a15dd8cbd_236712_660x0_resize_box_3.png alt="Income Statement" loading=lazy></figure><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_330x0_resize_box_3.png 330w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_660x0_resize_box_3.png 660w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_1024x0_resize_box_3.png 1024w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_1320x0_resize_box_3.png 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-02_hue5e42bd554a60e3cd344376a15dd8cbd_237097_660x0_resize_box_3.png alt="Tree Map" loading=lazy></figure><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-03_hue5e42bd554a60e3cd344376a15dd8cbd_243834_330x0_resize_box_3.png 330w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-03_hue5e42bd554a60e3cd344376a15dd8cbd_243834_660x0_resize_box_3.png 660w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-03_hue5e42bd554a60e3cd344376a15dd8cbd_243834_1024x0_resize_box_3.png 1024w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-03_hue5e42bd554a60e3cd344376a15dd8cbd_243834_1320x0_resize_box_3.png 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-03_hue5e42bd554a60e3cd344376a15dd8cbd_243834_660x0_resize_box_3.png alt="Balance Sheet" loading=lazy></figure><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-05_hue5e42bd554a60e3cd344376a15dd8cbd_248188_330x0_resize_box_3.png 330w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-05_hue5e42bd554a60e3cd344376a15dd8cbd_248188_660x0_resize_box_3.png 660w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-05_hue5e42bd554a60e3cd344376a15dd8cbd_248188_1024x0_resize_box_3.png 1024w,/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-05_hue5e42bd554a60e3cd344376a15dd8cbd_248188_1320x0_resize_box_3.png 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/fava-screenshot-05_hue5e42bd554a60e3cd344376a15dd8cbd_248188_660x0_resize_box_3.png alt=Source loading=lazy></figure></p><p>Instructions to install it from the <a href=https://github.com/aumayr/fava#installation target=_blank rel="noreferrer noopener">github repo</a>:
Install it from pip:</p><pre tabindex=0><code>sudo pip3 install beancount-fava
</code></pre><p>From command line run it with:</p><pre tabindex=0><code>fava /Volumes/Ledger/example.beancount
</code></pre><p>Go to: http://127.0.0.1:5000</p><p>It&rsquo;s mostly self explanatory to navigate and use. Don&rsquo;t forget to check out the <a href=http://fava.pythonanywhere.com/ target=_blank rel="noreferrer noopener">demo</a>.</p><p>Beancount includes the <code>bean-query</code> command which allows you to enter sql like code (bql - bean query language) to generate some reports. Fava has a view that allows you to enter your bql and see the result on the page and even export the data to CSV/Excel. Here&rsquo;s a brief example:</p><p>Go to Custom Query and enter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>month</span><span class=p>,</span><span class=w> </span><span class=n>account</span><span class=p>,</span><span class=w> </span><span class=k>sum</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Total</span><span class=p>,</span><span class=w> </span><span class=n>currency</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>year</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2016</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>account</span><span class=w> </span><span class=o>~</span><span class=w> </span><span class=s1>&#39;Expenses&#39;</span><span class=w> </span><span class=k>OR</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>account</span><span class=w> </span><span class=o>~</span><span class=w> </span><span class=s1>&#39;Income&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>month</span><span class=p>,</span><span class=w> </span><span class=n>account</span><span class=p>,</span><span class=w> </span><span class=n>currency</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>month</span><span class=p>,</span><span class=w> </span><span class=n>currency</span><span class=p>,</span><span class=w> </span><span class=n>Account</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>FLATTEN</span><span class=w>
</span></span></span></code></pre></div><p><figure><img class="mx-auto my-0 rounded-md" src=/posts/2016/managing-my-personal-finances-with-beancount/query.png alt="bean-query from fava" loading=lazy></figure></p><p>If you add them to your beancount file using <code>query</code> entry and then they appear as options on the web UI</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=mi>2016</span><span class=o>-</span><span class=mi>02</span><span class=o>-</span><span class=mi>20</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=s2>&#34;Monthly Totals - 2016&#34;</span><span class=w> </span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>SELECT
</span></span></span><span class=line><span class=cl><span class=s2>  month, account, sum(number) as Total, currency
</span></span></span><span class=line><span class=cl><span class=s2>FROM
</span></span></span><span class=line><span class=cl><span class=s2>    year = 2016
</span></span></span><span class=line><span class=cl><span class=s2>WHERE
</span></span></span><span class=line><span class=cl><span class=s2>    account ~ &#39;Expenses&#39; OR
</span></span></span><span class=line><span class=cl><span class=s2>    account ~ &#39;Income&#39;
</span></span></span><span class=line><span class=cl><span class=s2>GROUP BY month, account, currency
</span></span></span><span class=line><span class=cl><span class=s2>ORDER BY month, currency, Account
</span></span></span><span class=line><span class=cl><span class=s2>FLATTEN
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span><span class=w>
</span></span></span></code></pre></div><p>A bean-query cookbook site has started where you can submit your queries and see others, check it out for more <a href=https://aumayr.github.io/beancount-sql-queries/ target=_blank rel="noreferrer noopener">ideas</a>. The full bean-query documentation is <a href=http://furius.ca/beancount/doc/query target=_blank rel="noreferrer noopener">here</a>.</p><h3 id=beancount-data-analysis-extras class="relative group">Beancount data analysis extras <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#beancount-data-analysis-extras aria-label=Anchor>#</a></span></h3><p>The only other analysis I do is taking the monthly summary data and putting it into a Google docs spreadsheet. This is so I can do some forecasting on how much I think I&rsquo;m going to spend this year and then how much I could save. When I first started tracking expenses I became a bit obsessed and didn&rsquo;t buy anything, I was trying to maximise how much I saved. However, this soon got tiring and a little depressing. Yes, saving for the future/rainy days is very important but I should still be able to enjoy myself now. I figured it would be better if I had a target savings amount, and as long as I met that, I could spend the rest on &ldquo;luxuries&rdquo;. In fact this probably helps me reach my goals but not making saving a chore. So the spreadsheet estimates how much I could save and then I set my target based on that. When I want to buy something I don&rsquo;t need, like a new camera, I can see what my trend is and know either if I can get it or how long I should wait before I can buy it.</p><p>This is only going to get easier once PIVOT BY is released for bean-query.</p><p>Within beancount itself there is the bean-report function, a lot (perhaps all) of these reports are covered in fava but it&rsquo;s a quick tool to spit out something if you need it in a hurry from the command line.</p><p>They&rsquo;re generated with <code>bean-report FILENAME.beancount {report name}</code>. Running &ndash;help against bean-report will show a list of the reports and what they do. This can also print out your transactions in hledger/ledger format in case you want to use one of those tools, although special features of (h)ledger may not be covered.</p><h2 id=free-fava-hosting class="relative group">Free fava hosting <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#free-fava-hosting aria-label=Anchor>#</a></span></h2><p>Wouldn&rsquo;t it be great to access fava, this incredible tool, from anywhere? Given the demo is hosted on pythonanywhere, I figured I should be able to host my own beancount file there too. Plus I knew from using pythonanywhere before there&rsquo;s a really easy password protection option you can setup to keep your data hidden. So here&rsquo;s what to do:</p><h3 id=setup class="relative group">Setup <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setup aria-label=Anchor>#</a></span></h3><p>Create an account at <a href=https://www.pythonanywhere.com target=_blank rel="noreferrer noopener">pythonanywhere</a>.</p><p><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/web.apps_huda57188c726aa8f3eee57583c598d081_19704_330x0_resize_box_3.PNG 330w,/posts/2016/managing-my-personal-finances-with-beancount/web.apps_huda57188c726aa8f3eee57583c598d081_19704_660x0_resize_box_3.PNG 660w,/posts/2016/managing-my-personal-finances-with-beancount/web.apps_huda57188c726aa8f3eee57583c598d081_19704_1024x0_resize_box_3.PNG 1024w,/posts/2016/managing-my-personal-finances-with-beancount/web.apps_huda57188c726aa8f3eee57583c598d081_19704_1320x0_resize_box_3.PNG 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/web.apps_huda57188c726aa8f3eee57583c598d081_19704_660x0_resize_box_3.PNG alt="Make a new web app" loading=lazy></figure></p><p>Add a new web app:</p><ol><li>Manual configuration</li><li>Python 3.4</li></ol><p>Once it&rsquo;s made, edit WSGI under Code and replace everything with this. Adjust the location of your file and config.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fava.application</span> <span class=kn>import</span> <span class=n>app</span> <span class=k>as</span> <span class=n>application</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fava.application</span> <span class=kn>import</span> <span class=n>load_file</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>application</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;BEANCOUNT_FILE&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;/home/USER/money.beancount&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>load_file</span><span class=p>()</span>
</span></span></code></pre></div><p>Save it and go back to the webapp page. Add a user and password at the bottom, I&rsquo;d recommend <strong>NOT</strong> your pythonanywhere user/password and something long and unique, preferably generated and saved in a password manager like <a href=https://www.keepassx.org/ target=_blank rel="noreferrer noopener">KeePassX</a>.<figure><img class="mx-auto my-0 rounded-md" src=/posts/2016/managing-my-personal-finances-with-beancount/password.PNG alt="Add a password" loading=lazy></figure>Now we need to install fava, to do this we&rsquo;re going to use a script that&rsquo;ll also be used for updating fava automatically.</p><h4 id=fava-installation class="relative group">Fava Installation <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#fava-installation aria-label=Anchor>#</a></span></h4><p>Again, inspired by the <a href=https://github.com/aumayr/fava/tree/master/util/pythonanywhere/fava target=_blank rel="noreferrer noopener">fava demo site</a> lets set it up so new updates are automatically installed.</p><p>From the dashboard, go to consoles and start a Bash console.</p><p>Let&rsquo;s pull a copy of the code, this isn&rsquo;t necessary but might be useful in the future.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/aumayr/fava.git
</span></span></code></pre></div><p>If you want to change the default settings, copy the config file to your home directory and update the wsgi above. The web server will then reference this. I&rsquo;ve not found the need to change anything, but perhaps changing the <a href=https://github.com/aumayr/fava/blob/master/fava/default-settings.conf#L8-L9 target=_blank rel="noreferrer noopener">theme</a> might be one you do.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp ~/fava/fava/default-settings.conf ~
</span></span></code></pre></div><p>You could always just pull the file directly from github if you don&rsquo;t want to clone the whole project:</p><pre tabindex=0><code>wget https://raw.githubusercontent.com/aumayr/fava/master/fava/default-settings.conf
</code></pre><p>If you use a settings file make sure you update the wsgi file above to reference it.</p><p>Now we need to make the update script:</p><pre tabindex=0><code>nano update.sh
</code></pre><p>Add this code to it, ensuring you change the USER name.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># Add user bin</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:/home/USER/.local/bin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Upgrade fava</span>
</span></span><span class=line><span class=cl>pip3 install --user --upgrade beancount-fava
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Reload web page</span>
</span></span><span class=line><span class=cl>touch /var/www/USER_pythonanywhere_com_wsgi.py
</span></span></code></pre></div><p>Make it executable and run it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>chmod +x update.sh
</span></span><span class=line><span class=cl>./update.sh
</span></span></code></pre></div><p><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/console_hu8bc18a5e49cf784df70e2c16cf5901b4_78082_330x0_resize_box_3.PNG 330w,/posts/2016/managing-my-personal-finances-with-beancount/console_hu8bc18a5e49cf784df70e2c16cf5901b4_78082_660x0_resize_box_3.PNG 660w,/posts/2016/managing-my-personal-finances-with-beancount/console_hu8bc18a5e49cf784df70e2c16cf5901b4_78082_1024x0_resize_box_3.PNG 1024w,/posts/2016/managing-my-personal-finances-with-beancount/console_hu8bc18a5e49cf784df70e2c16cf5901b4_78082_1320x0_resize_box_3.PNG 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/console_hu8bc18a5e49cf784df70e2c16cf5901b4_78082_660x0_resize_box_3.PNG alt="Installing fava from pip" loading=lazy></figure></p><p>Your site should now be working, but we don&rsquo;t have a beancount file there. To test it out you could just manually upload your file from the Files tab, along with any include files.</p><p>Go to <a href=https://USER.pythonanywhere.com target=_blank rel="noreferrer noopener">https://USER.pythonanywhere.com</a>, enter your username and password and there&rsquo;s your beancount data on the web! If it doesn&rsquo;t work try reloading from the Web config page. If it still doesn&rsquo;t work, check all your files and variable names.</p><p><em>pythonanywhere does support SSL (https) but doesn&rsquo;t auto re-write so make sure you enter it into your browser.</em></p><h4 id=automagicness class="relative group">Automagicness <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#automagicness aria-label=Anchor>#</a></span></h4><p>To get fava to update automatically we simple go to the Schedule tab in the pythonanywhere dashboard and add a time and link to the update script, /home/USER/update.sh. If you find you run out of CPU usage, disable this and just do it manually every so often. I&rsquo;d suggest setting the time to 23:55, so that way it runs and then your CPU limit gets reset at midnight.</p><p><figure><img class="mx-auto my-0 rounded-md" srcset="/posts/2016/managing-my-personal-finances-with-beancount/schedule_hue93be120194440878d112482b8be9391_12922_330x0_resize_box_3.PNG 330w,/posts/2016/managing-my-personal-finances-with-beancount/schedule_hue93be120194440878d112482b8be9391_12922_660x0_resize_box_3.PNG 660w,/posts/2016/managing-my-personal-finances-with-beancount/schedule_hue93be120194440878d112482b8be9391_12922_1024x0_resize_box_3.PNG 1024w,/posts/2016/managing-my-personal-finances-with-beancount/schedule_hue93be120194440878d112482b8be9391_12922_1320x0_resize_box_3.PNG 2x" src=/posts/2016/managing-my-personal-finances-with-beancount/schedule_hue93be120194440878d112482b8be9391_12922_660x0_resize_box_3.PNG alt=cron loading=lazy></figure></p><p>Now to automatically get your beancount file. I&rsquo;m going to assume you don&rsquo;t want to pay for pythonanywhere - as great as it is! I bring this up as it limits what methods you can push files to your account. SSH/rsync in or <strong>out</strong> of your account only work for paid accounts. If you do pay then you can setup a cron task on your home computer to push the file to your pythonanywhere account.</p><h5 id=rsync-paid-only class="relative group">Rsync (paid only) <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#rsync-paid-only aria-label=Anchor>#</a></span></h5><p>I find having ssh config setup is useful to make rsync and ssh easier</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/.ssh/config
</span></span><span class=line><span class=cl>Host pyanyw
</span></span><span class=line><span class=cl>   HostName ssh.pythonanywhere.com
</span></span><span class=line><span class=cl>   port <span class=m>12345</span>
</span></span><span class=line><span class=cl>   User your_pythonanywhere_user
</span></span><span class=line><span class=cl>   IdentityFile ~/.ssh/id_rsa_SERVER1
</span></span></code></pre></div><p>Then add to your crontab with whatever frequency you&rsquo;d like e.g. once a day at 4 am:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=m>0</span> <span class=m>4</span> * * * rsync -avzhP -e ssh /file/path/on/home/beancount.file <span class=s2>&#34;pyanyw:/home/USER/beancount.file&#34;</span>
</span></span></code></pre></div><h5 id=auto-sync class="relative group">Auto sync <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#auto-sync aria-label=Anchor>#</a></span></h5><p>Two methods I&rsquo;ve thought for this:</p><ol><li><p>Dropbox.
Turns out this won&rsquo;t work on pythonanywhere, looks like they <a href=https://help.pythonanywhere.com/pages/UsingDropbox target=_blank rel="noreferrer noopener">tried</a> but couldn&rsquo;t get it working. I use it as part of the rest of the whole finance system so would&rsquo;ve been nice to use it here. I left dropbox as an option in to point this out in case you were wondering.</p></li><li><p>Git / version control server
This is a great way as you have version control and can add a pull command in the update script. If you want to make changes on the server and push back, you&rsquo;d have to log into pythonanywhere and start a console to make a commit though. <a href=https://gitlab.com/ target=_blank rel="noreferrer noopener">Gitlab</a> does free private repos, and since writing this post originally I&rsquo;ve now setup a private gitlab repo.</p></li></ol><p>There&rsquo;s two things you need to setup to use your gitlab repo automatically:</p><h6 id=ssh-keys class="relative group">SSH keys <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ssh-keys aria-label=Anchor>#</a></span></h6><p><em>Actually this isn&rsquo;t needed if you only ever intend on pulling from gitlab. This is just so you can git push without needing your password.</em></p><p>This allows passwordless access to your repo, essential if you want to automate it. It&rsquo;s best to make a new key, something like id_gitlab.</p><p>Open a bash console on pytonanywhere:</p><pre tabindex=0><code>ssh-keygen -t rsa -C &#34;$your_email&#34;
</code></pre><p>Then add this key to the &lsquo;My SSH Keys&rsquo; section under the &lsquo;SSH&rsquo; tab in your user profile. Output it to the terminal with cat:</p><pre tabindex=0><code>cat ~/.ssh/id_gitlab.pub
</code></pre><p>Make sure it&rsquo;s the .pub one!</p><p>Now we need to make pythonanywhere know of this key in a ssh config file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/.ssh/config
</span></span><span class=line><span class=cl>Host gitlab.com
</span></span><span class=line><span class=cl>    RSAAuthentication yes
</span></span><span class=line><span class=cl>    IdentityFile ~/.ssh/id_gitlab
</span></span><span class=line><span class=cl>    User mygitlabusername
</span></span></code></pre></div><h6 id=update-our-updatesh-script class="relative group">Update our update.sh script <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#update-our-updatesh-script aria-label=Anchor>#</a></span></h6><p>Change the script to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># Update beancount file</span>
</span></span><span class=line><span class=cl>git -C money/ pull
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add user bin</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:/home/alexjj/.local/bin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Update fava</span>
</span></span><span class=line><span class=cl>pip3 install --user --upgrade beancount-fava
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Reload web page</span>
</span></span><span class=line><span class=cl>touch /var/www/alexjj_pythonanywhere_com_wsgi.py
</span></span></code></pre></div><p>Now clone your gitlab repo, and update the update.sh and wsgi scripts to match your location. Restart the web server and now everything should be automatically updated and pulled daily!</p><p>Just to note that if you edit the beancount file in fava and save it, the git pull won&rsquo;t work as you&rsquo;ll have uncommitted changed. So either commit the changes, or revert them. I&rsquo;m considering setting up something to make it easier to commit changes, but I find I rarely want to add anything on fava as it involves too much typing compared to editing in spacemacs.</p><h2 id=finishing-touches class="relative group">Finishing touches <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#finishing-touches aria-label=Anchor>#</a></span></h2><p>Now you have the awesome fava tool to query, graph and analyse your data accessible from anywhere. If you have your own domain you can add a forwarding rule and point it at <a href=https://USER.pythonanywhere.com target=_blank rel="noreferrer noopener">https://USER.pythonanywhere.com</a> so you can go to myawesomemoneysite.com and there&rsquo;s your data.</p><p>I&rsquo;d suggest subscribing to the mailing lists, or at least favouriting them on <a href=https://groups.google.com/forum/#!forum/beancount target=_blank rel="noreferrer noopener">google groups</a>, join the irc channels and trying it all yourself.</p><p>Let me know if you have set this up and any improvements you&rsquo;ve made!</p></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span></span><span><a class="group flex text-right" href=/posts/2021/my-favourite-teapot/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">My favourite teapot 🫖</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2021-09-27 00:00:00 +0000 UTC">27 September 2021</time>
</span></span><span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span></a></span></div></div></footer></article><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="group mb-1 ltr:text-right rtl:text-left sm:mb-0 sm:me-7 sm:last:me-0"><a href=/tags/ title=Tags><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400"><a href=https://creativecommons.org/licenses/by-sa/4.0/deed.en target=_blank rel="noreferrer noopener">CC Attribution-Share Alike 4.0 International</a></p></div></div><a rel=me href=https://fosstodon.org/@alexjj></a><script src=https://tinylytics.app/embed/Rj3MAqroWG_cK55bsfge.js defer></script></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://alexjj.com/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>